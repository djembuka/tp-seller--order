{"version":3,"file":"application.bundle.js","sources":["../src/stores/order.js","../src/components/application.js","../src/loader.js"],"sourcesContent":["import { defineStore } from 'ui.vue3.pinia';\r\n\r\nexport const orderStore = defineStore('order', {\r\n  state: () => ({\r\n    OPTIONS: {},\r\n    controls: {},\r\n    result: {},\r\n    loading: false,\r\n    sessid: window.BX.bitrix_sessid(),\r\n  }),\r\n  getters: {\r\n    formData(state) {\r\n      const result = {};\r\n\r\n      Object.entries(state.controls).forEach((entry) => {\r\n        entry[1].forEach((control) => {\r\n          if (entry[0] === 'location' && typeof control.value === 'object') {\r\n            result[control.name] = control.value.id;\r\n          } else {\r\n            result[control.name] = control.value;\r\n          }\r\n        });\r\n      });\r\n\r\n      return result;\r\n    },\r\n  },\r\n  actions: {\r\n    loadData() {\r\n      this.loading = true;\r\n\r\n      const self = this;\r\n\r\n      BX.ajax({\r\n        method: 'POST',\r\n        dataType: 'json',\r\n        url: this.OPTIONS.ajaxUrl,\r\n        data: this.getData(),\r\n        onsuccess: (result) => {\r\n          self.loading = false;\r\n          self.setLoadResult({ result });\r\n        },\r\n        onfailure: (error) => {},\r\n      });\r\n    },\r\n    getData() {\r\n      return {\r\n        order: this.formData,\r\n        sessid: this.sessid,\r\n        via_ajax: 'Y',\r\n        SITE_ID: this.OPTIONS.siteID,\r\n        signedParamsString: this.OPTIONS.signedParamsString,\r\n        'soa-action': 'refreshOrderAjax',\r\n      };\r\n    },\r\n    changeControlValue({ control, value, checked }) {\r\n      switch (control.property) {\r\n        case 'text':\r\n        case 'textarea':\r\n        case 'hint':\r\n          this.changeTextControlValue({ control, value });\r\n          break;\r\n        case 'multiselect':\r\n          this.changeMultiselectValue({ control, value, checked });\r\n          break;\r\n        case 'checkbox':\r\n          this.changeCheckboxValue({ control, checked });\r\n          break;\r\n        case 'select':\r\n          this[\r\n            `changeSelect${control.type\r\n              .substring(0, 1)\r\n              .toUpperCase()}${control.type.substring(1).toLowerCase()}Value`\r\n          ]({ control, value });\r\n          break;\r\n        case 'file':\r\n          this.changeFileValue({ control, value });\r\n          break;\r\n        case 'date':\r\n          this.changeDateValue({ control, value });\r\n          break;\r\n        case 'color':\r\n          this.changeColorValue({ control, value });\r\n          break;\r\n      }\r\n    },\r\n    changeTextControlValue({ control, value }) {\r\n      control.value = value;\r\n    },\r\n    changeSelectRadioValue({ control, value }) {\r\n      control.value = value;\r\n    },\r\n    setLoadResult({ result }) {\r\n      this.result = result;\r\n      this.createControls(this.result.order);\r\n    },\r\n    createControls(data = this.OPTIONS.result) {\r\n      //location\r\n      const location = [\r\n        {\r\n          property: 'hint',\r\n          id: 'twpxOrderLocationId',\r\n          name: 'ORDER_PROP_6',\r\n          value: '',\r\n          count: 3,\r\n          action: 'twinpx:location-hint',\r\n          required: false,\r\n          disabled: false,\r\n        },\r\n      ];\r\n\r\n      //person type\r\n      const personType = [\r\n        {\r\n          property: 'select',\r\n          type: 'radio',\r\n          id: 'radioID',\r\n          name: 'PERSON_TYPE',\r\n          label: 'Person types',\r\n        },\r\n      ];\r\n      if (data) {\r\n        personType[0].options = Object.values(data.PERSON_TYPE).map((p) => {\r\n          return {\r\n            label: p.NAME,\r\n            code: p.ID,\r\n          };\r\n        });\r\n      }\r\n      personType[0].value = Object.values(data.PERSON_TYPE).find(\r\n        (p) => p.CHECKED === 'Y'\r\n      ).ID;\r\n\r\n      //delivery\r\n      const delivery = [\r\n        {\r\n          property: 'select',\r\n          type: 'radio',\r\n          id: 'ID_DELIVERY_ID_',\r\n          name: 'DELIVERY_ID',\r\n          label: 'Delivery',\r\n        },\r\n      ];\r\n      if (data) {\r\n        delivery[0].options = Object.values(data.DELIVERY).map((d) => {\r\n          return {\r\n            label: d.NAME,\r\n            code: d.ID,\r\n          };\r\n        });\r\n      }\r\n      delivery[0].value = Object.values(data.DELIVERY).find(\r\n        (d) => d.CHECKED === 'Y'\r\n      ).ID;\r\n\r\n      //paysystem\r\n      const paysystem = [\r\n        {\r\n          property: 'select',\r\n          type: 'radio',\r\n          id: 'ID_PAY_SYSTEM_ID_',\r\n          name: 'PAY_SYSTEM_ID',\r\n          label: 'Pay system',\r\n        },\r\n      ];\r\n      if (data) {\r\n        paysystem[0].options = Object.values(data.PAY_SYSTEM).map((p) => {\r\n          return {\r\n            label: p.NAME,\r\n            code: p.ID,\r\n          };\r\n        });\r\n      }\r\n      paysystem[0].value = Object.values(data.PAY_SYSTEM).find(\r\n        (p) => p.CHECKED === 'Y'\r\n      ).ID;\r\n\r\n      //order prors\r\n      let orderProps = [];\r\n\r\n      if (data) {\r\n        orderProps = data.ORDER_PROP.properties.map((p) => {\r\n          let property = 'text';\r\n          if (p.IS_ADDRESS === 'Y') {\r\n            property = 'textarea';\r\n          }\r\n          return {\r\n            property,\r\n            id: p.ID,\r\n            name: p.CODE,\r\n            label: p.NAME,\r\n            value: p.VALUE[0],\r\n            required: false,\r\n            disabled: false,\r\n          };\r\n        });\r\n      }\r\n\r\n      this.controls = {\r\n        hidden: [\r\n          {\r\n            property: 'text',\r\n            id: 'sessid',\r\n            name: 'sessid',\r\n            label: 'sessid',\r\n            value: window.BX.bitrix_sessid(),\r\n            required: false,\r\n            disabled: false,\r\n          },\r\n          {\r\n            property: 'text',\r\n            id: 'soaAction',\r\n            name: 'soa-action',\r\n            label: 'soa-action',\r\n            value: 'saveOrderAjax',\r\n            required: false,\r\n            disabled: false,\r\n          },\r\n          {\r\n            property: 'text',\r\n            id: 'locationType',\r\n            name: 'location_type',\r\n            label: 'location_type',\r\n            value: 'code',\r\n            required: false,\r\n            disabled: false,\r\n          },\r\n          {\r\n            property: 'text',\r\n            id: 'BUYER_STORE',\r\n            name: 'BUYER_STORE',\r\n            label: 'BUYER_STORE',\r\n            value: 'BUYER_STORE',\r\n            required: false,\r\n            disabled: false,\r\n          },\r\n        ],\r\n        personType,\r\n        delivery,\r\n        paysystem,\r\n        orderProps,\r\n        location,\r\n      };\r\n    },\r\n    loadLocationHints({ control, action }, callback = () => {}) {\r\n      control.loading = true;\r\n\r\n      const data = {\r\n        select: {\r\n          1: 'CODE',\r\n          2: 'TYPE_ID',\r\n          VALUE: 'ID',\r\n          DISPLAY: 'NAME.NAME',\r\n        },\r\n        additionals: {\r\n          1: 'PATH',\r\n        },\r\n        filter: {\r\n          '=PHRASE': control.value.forEach\r\n            ? control.value.value\r\n            : control.value,\r\n          '=NAME.LANGUAGE_ID': 'ru',\r\n          '=SITE_ID': 's1',\r\n        },\r\n        version: '2',\r\n        PAGE_SIZE: '10',\r\n        PAGE: '0',\r\n      };\r\n\r\n      BX.ajax({\r\n        method: 'POST',\r\n        dataType: 'json',\r\n        url: '/bitrix/components/bitrix/sale.location.selector.search/get.php',\r\n        data,\r\n        onsuccess: (result) => {\r\n          control.loading = false;\r\n          resultFn(result);\r\n        },\r\n        onfailure: (error) => {\r\n          console.log(error);\r\n        },\r\n      });\r\n\r\n      function resultFn(result) {\r\n        if (!result.data || !result.data.ITEMS || !result.data.ITEMS.map) {\r\n          return;\r\n        }\r\n\r\n        control.hints = result.data.ITEMS.map((obj) => {\r\n          return {\r\n            id: obj.CODE,\r\n            value: obj.DISPLAY,\r\n          };\r\n        });\r\n\r\n        if (callback) {\r\n          callback();\r\n        }\r\n      }\r\n    },\r\n    setLocationHints({ control, value }) {\r\n      control.hints = value;\r\n    },\r\n  },\r\n});\r\n","import './application.css';\r\n\r\nimport { LocationComponent } from 'local.vue-components.location-component';\r\nimport { ControlComponent } from 'local.vue-components.control-component';\r\nimport { LoaderCircle } from 'local.vue-components.loader-circle';\r\n\r\nimport { mapState, mapActions } from 'ui.vue3.pinia';\r\nimport { orderStore } from '../stores/order';\r\n\r\nexport const Application = {\r\n  data() {\r\n    return {\r\n      locations: undefined,\r\n    };\r\n  },\r\n  components: { LocationComponent, ControlComponent, LoaderCircle },\r\n  // language=Vue\r\n\r\n  template: `\r\n  <LoaderCircle :show=\"loading\" />\r\n  <form id=\"bx-soa-order-form\" ref=\"form\">\r\n\r\n    <fieldset>\r\n      <legend>Person type</legend>\r\n      <div v-for=\"control in controls.personType\" :key=\"control.id\">\r\n        <ControlComponent :control=\"control\" @input=\"input\" @hints=\"hints\" />\r\n      </div>\r\n    </fieldset>\r\n\r\n    <hr>\r\n\r\n    <fieldset>\r\n      <legend>Delivery</legend>\r\n      <div v-for=\"control in controls.delivery\" :key=\"control.id\">\r\n        <ControlComponent  :control=\"control\" @input=\"input\" @hints=\"hints\" />\r\n      </div>\r\n    </fieldset>\r\n\r\n    <hr>\r\n\r\n    <fieldset>\r\n      <legend>Location</legend>\r\n      <hr>\r\n      <div v-for=\"control in controls.location\" :key=\"control.id\">\r\n        <LocationComponent :control=\"control\" @input=\"input\" @hints=\"locationHints\" />\r\n      </div>\r\n    </fieldset>\r\n\r\n    <hr>\r\n\r\n    <fieldset>\r\n      <legend>Paysystem</legend>\r\n      <div v-for=\"control in controls.paysystem\" :key=\"control.id\">\r\n        <ControlComponent :control=\"control\" @input=\"input\" @hints=\"hints\" />\r\n      </div>\r\n    </fieldset>\r\n\r\n    <hr>\r\n\r\n    <fieldset>\r\n      <legend>Order props</legend>\r\n      <hr>\r\n      <div v-for=\"(control, index) in controls.orderProps\" :key=\"control.id\">\r\n        <ControlComponent :control=\"control\" @input=\"input\" @hints=\"hints\" />\r\n        <hr v-if=\"index + 1 < controls.orderProps.length\">\r\n      </div>\r\n    </fieldset>\r\n\r\n    <hr>\r\n\r\n    <fieldset>\r\n      <legend>Comment</legend>\r\n      <ControlComponent :control=\"{\r\n            property: 'textarea',\r\n            id: 'orderDescription',\r\n            name: 'ORDER_DESCRIPTION',\r\n            label: 'Comment',\r\n            value: '',\r\n            required: false,\r\n            disabled: false,\r\n          }\" @input=\"input\" @hints=\"hints\" />\r\n    </fieldset>\r\n\r\n    <hr>\r\n\r\n    <fieldset>\r\n      <legend>Hidden</legend>\r\n      <hr>\r\n      <div style=\"display: grid; gap: 16px; grid-template-columns: repeat(4, 1fr);\">\r\n        <ControlComponent v-for=\"control in controls.hidden\" :key=\"control.id\" :control=\"control\" @input=\"input\" @hints=\"hints\" />\r\n      </div>\r\n    </fieldset>\r\n\r\n    <hr>\r\n    \r\n  </form>\r\n  `,\r\n  computed: {\r\n    ...mapState(orderStore, ['OPTIONS', 'controls', 'loading']),\r\n    LOCATION() {\r\n      if (this.OPTIONS.locations) {\r\n        return Object.values(this.OPTIONS.locations)[0].lastValue;\r\n      }\r\n    },\r\n  },\r\n  methods: {\r\n    ...mapActions(orderStore, [\r\n      'changeControlValue',\r\n      'loadData',\r\n      'loadLocationHints',\r\n      'setLocationHints',\r\n    ]),\r\n    input(attrs) {\r\n      this.changeControlValue(attrs);\r\n\r\n      if (\r\n        attrs.control.type === 'radio' ||\r\n        (attrs.control.property === 'hint' &&\r\n          typeof attrs.control.value === 'object')\r\n      ) {\r\n        this.loadData();\r\n      }\r\n    },\r\n    locationHints({ type, control, action, value }) {\r\n      switch (type) {\r\n        case 'get':\r\n          this.loadLocationHints({\r\n            control,\r\n            action,\r\n          });\r\n          break;\r\n        case 'set':\r\n          this.setLocationHints({\r\n            control,\r\n            value,\r\n          });\r\n          break;\r\n      }\r\n    },\r\n  },\r\n};\r\n","import { BitrixVue } from 'ui.vue3';\r\nimport { Application } from './components/application';\r\nimport { createPinia, setActivePinia } from 'ui.vue3.pinia';\r\nimport { orderStore } from './stores/order';\r\n\r\nexport class OrderMake {\r\n  #store;\r\n  #rootNode;\r\n  #application;\r\n\r\n  constructor(rootNode, options): void {\r\n    this.#store = createPinia();\r\n    this.#rootNode = document.querySelector(rootNode);\r\n    this.options = options;\r\n  }\r\n\r\n  run(): void {\r\n    const self = this;\r\n\r\n    this.#application = BitrixVue.createApp({\r\n      name: 'Order Application',\r\n      components: {\r\n        Application,\r\n      },\r\n      template: '<Application/>',\r\n      mounted() {\r\n        if (self.options && typeof self.options === 'object') {\r\n          Object.keys(self.options).forEach((key) => {\r\n            orderStore()[key] = self.options[key] || '';\r\n          });\r\n        }\r\n\r\n        orderStore().createControls();\r\n      },\r\n    });\r\n\r\n    this.#application.use(this.#store);\r\n    this.#application.mount(this.#rootNode);\r\n  }\r\n\r\n  initStorageBeforeStartApplication(): void {\r\n    setActivePinia(this.#store);\r\n  }\r\n\r\n  getOrderStore(): Object {\r\n    return orderStore;\r\n  }\r\n}\r\n"],"names":["orderStore","defineStore","state","OPTIONS","controls","result","loading","sessid","window","BX","bitrix_sessid","getters","formData","Object","entries","forEach","entry","control","value","name","id","actions","loadData","self","ajax","method","dataType","url","ajaxUrl","data","getData","onsuccess","setLoadResult","onfailure","error","order","via_ajax","SITE_ID","siteID","signedParamsString","changeControlValue","checked","property","changeTextControlValue","changeMultiselectValue","changeCheckboxValue","type","substring","toUpperCase","toLowerCase","changeFileValue","changeDateValue","changeColorValue","changeSelectRadioValue","createControls","location","count","action","required","disabled","personType","label","options","values","PERSON_TYPE","map","p","NAME","code","ID","find","CHECKED","delivery","DELIVERY","d","paysystem","PAY_SYSTEM","orderProps","ORDER_PROP","properties","IS_ADDRESS","CODE","VALUE","hidden","loadLocationHints","callback","select","DISPLAY","additionals","filter","version","PAGE_SIZE","PAGE","resultFn","console","log","ITEMS","hints","obj","setLocationHints","Application","locations","undefined","components","LocationComponent","ControlComponent","LoaderCircle","template","computed","mapState","LOCATION","lastValue","methods","mapActions","input","attrs","locationHints","OrderMake","rootNode","createPinia","document","querySelector","BitrixVue","createApp","mounted","keys","key","use","mount","setActivePinia"],"mappings":"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"}