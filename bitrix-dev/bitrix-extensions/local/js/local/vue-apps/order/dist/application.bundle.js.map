{"version":3,"file":"application.bundle.js","sources":["../src/stores/order.js","../src/components/application.js","../src/loader.js"],"sourcesContent":["import { defineStore } from 'ui.vue3.pinia';\r\n\r\nexport const orderStore = defineStore('order', {\r\n  state: () => ({\r\n    OPTIONS: {},\r\n    controls: {},\r\n  }),\r\n  actions: {\r\n    changeControlValue({ control, value, checked }) {\r\n      switch (control.property) {\r\n        case 'text':\r\n        case 'textarea':\r\n          this.changeTextControlValue({ control, value });\r\n          break;\r\n        case 'multiselect':\r\n          this.changeMultiselectValue({ control, value, checked });\r\n          break;\r\n        case 'checkbox':\r\n          this.changeCheckboxValue({ control, checked });\r\n          break;\r\n        case 'select':\r\n          this[\r\n            `changeSelect${control.type\r\n              .substring(0, 1)\r\n              .toUpperCase()}${control.type.substring(1).toLowerCase()}Value`\r\n          ]({ control, value });\r\n          break;\r\n        case 'file':\r\n          this.changeFileValue({ control, value });\r\n          break;\r\n        case 'date':\r\n          this.changeDateValue({ control, value });\r\n          break;\r\n        case 'color':\r\n          this.changeColorValue({ control, value });\r\n          break;\r\n      }\r\n    },\r\n    changeTextControlValue({ control, value }) {\r\n      control.value = value;\r\n    },\r\n    changeSelectRadioValue({ control, value }) {\r\n      console.log(control, value);\r\n      control.value = value;\r\n    },\r\n    setOptions({ options }) {\r\n      this.OPTIONS = options;\r\n    },\r\n    createControls() {\r\n      //person type\r\n      const personType = {\r\n        property: 'select',\r\n        type: 'radio',\r\n        id: 'radioID',\r\n        name: 'PERSON_TYPE',\r\n        label: 'Person types',\r\n      };\r\n      if (this.OPTIONS.result) {\r\n        personType.options = Object.values(this.OPTIONS.result.PERSON_TYPE).map(\r\n          (p) => {\r\n            return {\r\n              label: p.NAME,\r\n              code: p.ID,\r\n            };\r\n          }\r\n        );\r\n      }\r\n      personType.value = Object.values(this.OPTIONS.result.PERSON_TYPE).find(\r\n        (p) => p.CHECKED === 'Y'\r\n      ).ID;\r\n\r\n      //delivery\r\n      const delivery = {\r\n        property: 'select',\r\n        type: 'radio',\r\n        id: 'ID_DELIVERY_ID_',\r\n        name: 'DELIVERY_ID',\r\n        label: 'Delivery',\r\n      };\r\n      if (this.OPTIONS.result) {\r\n        delivery.options = Object.values(this.OPTIONS.result.DELIVERY).map(\r\n          (d) => {\r\n            return {\r\n              label: d.NAME,\r\n              code: d.ID,\r\n            };\r\n          }\r\n        );\r\n      }\r\n      delivery.value = Object.values(this.OPTIONS.result.DELIVERY).find(\r\n        (d) => d.CHECKED === 'Y'\r\n      ).ID;\r\n\r\n      //paysystem\r\n      const paysystem = {\r\n        property: 'select',\r\n        type: 'radio',\r\n        id: 'ID_PAY_SYSTEM_ID_',\r\n        name: 'PAY_SYSTEM_ID',\r\n        label: 'Pay system',\r\n      };\r\n      if (this.OPTIONS.result) {\r\n        paysystem.options = Object.values(this.OPTIONS.result.PAY_SYSTEM).map(\r\n          (p) => {\r\n            return {\r\n              label: p.NAME,\r\n              code: p.ID,\r\n            };\r\n          }\r\n        );\r\n      }\r\n      paysystem.value = Object.values(this.OPTIONS.result.PAY_SYSTEM).find(\r\n        (p) => p.CHECKED === 'Y'\r\n      ).ID;\r\n\r\n      //order prors\r\n      let orderProps = [];\r\n\r\n      if (this.OPTIONS.result) {\r\n        orderProps = this.OPTIONS.result.ORDER_PROP.properties.map((p) => {\r\n          return {\r\n            property: 'text',\r\n            id: p.ID,\r\n            name: p.CODE,\r\n            label: p.NAME,\r\n            value: p.VALUE[0],\r\n            required: false,\r\n            disabled: false,\r\n          };\r\n        });\r\n      }\r\n\r\n      this.controls = {\r\n        hidden: [\r\n          {\r\n            property: 'text',\r\n            id: 'sessid',\r\n            name: 'sessid',\r\n            label: 'sessid',\r\n            value: window.BX.bitrix_sessid(),\r\n            required: false,\r\n            disabled: false,\r\n          },\r\n          {\r\n            property: 'text',\r\n            id: 'soaAction',\r\n            name: 'soa-action',\r\n            label: 'soa-action',\r\n            value: 'saveOrderAjax',\r\n            required: false,\r\n            disabled: false,\r\n          },\r\n          {\r\n            property: 'text',\r\n            id: 'locationType',\r\n            name: 'location_type',\r\n            label: 'location_type',\r\n            value: 'code',\r\n            required: false,\r\n            disabled: false,\r\n          },\r\n          {\r\n            property: 'text',\r\n            id: 'BUYER_STORE',\r\n            name: 'BUYER_STORE',\r\n            label: 'BUYER_STORE',\r\n            value: 'BUYER_STORE',\r\n            required: false,\r\n            disabled: false,\r\n          },\r\n        ],\r\n        personType,\r\n        delivery,\r\n        paysystem,\r\n        orderProps,\r\n      };\r\n\r\n      console.log(this.controls);\r\n    },\r\n  },\r\n});\r\n","import './application.css';\r\nimport { LocationComponent } from 'local.vue-components.location-component';\r\nimport { ControlComponent } from 'local.vue-components.control-component';\r\n\r\nimport { mapState, mapActions } from 'ui.vue3.pinia';\r\nimport { orderStore } from '../stores/order';\r\n\r\nexport const Application = {\r\n  data() {\r\n    return {\r\n      locations: undefined,\r\n      order: undefined,\r\n      sessid: window.BX.bitrix_sessid(),\r\n    };\r\n  },\r\n  components: { LocationComponent, ControlComponent },\r\n  // language=Vue\r\n\r\n  template: `\r\n  <form id=\"bx-soa-order-form\" ref=\"form\">\r\n\r\n    <fieldset>\r\n      <legend>Person type</legend>\r\n      <ControlComponent v-if=\"controls.personType\" :control=\"controls.personType\" @input=\"input\" @hints=\"hints\" />\r\n    </fieldset>\r\n\r\n    <hr>\r\n\r\n    <fieldset>\r\n      <legend>Delivery</legend>\r\n      <ControlComponent v-if=\"controls.delivery\" :control=\"controls.delivery\" @input=\"input\" @hints=\"hints\" />\r\n    </fieldset>\r\n\r\n    <hr>\r\n\r\n    <fieldset>\r\n      <legend>Location</legend>\r\n      <input type=\"text\" autocomplete=\"off\" name=\"ORDER_PROP_6\" :value=\"LOCATION\" class=\"dropdown-field\" placeholder=\"Введите название ...\" wfd-invisible=\"true\" style=\"display: none;\">\r\n    </fieldset>\r\n\r\n    <hr>\r\n\r\n    <fieldset>\r\n      <legend>Paysystem</legend>\r\n      <ControlComponent v-if=\"controls.paysystem\" :control=\"controls.paysystem\" @input=\"input\" @hints=\"hints\" />\r\n    </fieldset>\r\n\r\n    <hr>\r\n\r\n    <fieldset>\r\n      <legend>Order props</legend>\r\n      <hr>\r\n      <div v-for=\"control in controls.orderProps\" :key=\"control.id\">\r\n        <ControlComponent :control=\"control\" @input=\"input\" @hints=\"hints\" />\r\n        <hr>\r\n      </div>\r\n      <textarea id=\"orderDescription\" cols=\"4\" class=\"form-control bx-soa-customer-textarea bx-ios-fix\" name=\"ORDER_DESCRIPTION\"></textarea>\r\n    </fieldset>\r\n\r\n    <hr>\r\n\r\n    <fieldset>\r\n      <legend>Hidden</legend>\r\n      <hr>\r\n      <div style=\"display: grid; gap: 16px; grid-template-columns: repeat(4, 1fr);\">\r\n        <ControlComponent v-for=\"control in controls.hidden\" :key=\"control.id\" :control=\"control\" @input=\"input\" @hints=\"hints\" />\r\n      </div>\r\n    </fieldset>\r\n\r\n    <hr>\r\n    \r\n  </form>\r\n  `,\r\n  computed: {\r\n    ...mapState(orderStore, ['OPTIONS', 'controls']),\r\n    LOCATION() {\r\n      if (this.OPTIONS.locations) {\r\n        return Object.values(this.OPTIONS.locations)[0].lastValue;\r\n      }\r\n    },\r\n  },\r\n  methods: {\r\n    ...mapActions(orderStore, ['changeControlValue', 'setOptions']),\r\n    input(attrs) {\r\n      this.changeControlValue(attrs);\r\n    },\r\n    changeDelivery() {\r\n      this.ajax();\r\n    },\r\n    changePaysystem() {\r\n      this.ajax();\r\n    },\r\n    makeData(data) {\r\n      //pay systems\r\n      this.PAY_SYSTEM_LIST = Object.values(data.PAY_SYSTEM).map((pay) => {\r\n        return {\r\n          ID: pay.ID,\r\n          SORT: pay.SORT,\r\n          NAME: pay.NAME,\r\n          DESCRIPTION: pay.DESCRIPTION,\r\n          CHECKED: pay.CHECKED,\r\n          SRC: pay.PSA_LOGOTIP_SRC,\r\n        };\r\n      });\r\n\r\n      //deliveries\r\n      this.DELIVERY_LIST = Object.values(data.DELIVERY).map((del) => {\r\n        return {\r\n          ID: del.ID,\r\n          SORT: del.SORT,\r\n          NAME: del.NAME,\r\n          DESCRIPTION: del.DESCRIPTION,\r\n          CHECKED: del.CHECKED,\r\n          SRC: del.LOGOTIP_SRC,\r\n          PRICE_FORMATED: del.PRICE_FORMATED,\r\n          FIELD_NAME: del.FIELD_NAME,\r\n        };\r\n      });\r\n\r\n      //basket\r\n      this.BASKET = Object.values(data.GRID.ROWS).map((product) => {\r\n        return {\r\n          ID: product.data.ID,\r\n          SORT: product.data.SORT,\r\n          NAME: product.data.NAME,\r\n          PROPERTIES: Object.values(product.data.PROPS),\r\n          QUANTITY: product.data.QUANTITY,\r\n          MEASURE: product.data.MEASURE_TEXT,\r\n          SRC: product.data.DETAIL_PICTURE_SRC_ORIGINAL,\r\n          BASE_PRICE: product.data.BASE_PRICE,\r\n          BASE_PRICE_FORMATED: product.data.BASE_PRICE_FORMATED,\r\n          PRICE: product.data.PRICE, //price with discount\r\n          PRICE_FORMATED: product.data.PRICE_FORMATED, //price with discount\r\n          DETAIL_PAGE_URL: product.data.DETAIL_PAGE_URL,\r\n          DISCOUNT_PRICE: product.data.DISCOUNT_PRICE,\r\n          DESCRIPTION: product.data.PREVIEW_TEXT,\r\n          SUM_BASE_FORMATED: product.data.SUM_BASE_FORMATED,\r\n          SUM_FORMATED: product.data.SUM,\r\n        };\r\n      });\r\n\r\n      //properties\r\n      this.PROPERTIES = Object.values(data.ORDER_PROP.properties);\r\n\r\n      this.DELIVERY_ERRORS = data.ERROR;\r\n      this.PAY_SYSTEM_ERRORS = data.ERROR;\r\n\r\n      this.PERSON_TYPE = Object.values(data.PERSON_TYPE);\r\n\r\n      this.PRODUCTS_BASE_PRICE_FORMATED = data.TOTAL.PRICE_WITHOUT_DISCOUNT;\r\n      this.PRODUCTS_PRICE_FORMATED = data.TOTAL.ORDER_PRICE_FORMATED;\r\n      this.PRODUCTS_DISCOUNT_FORMATED = data.TOTAL.DISCOUNT_PRICE_FORMATED;\r\n\r\n      this.DELIVERY_BASE_PRICE_FORMATED = data.TOTAL.DELIVERY_PRICE_FORMATED;\r\n\r\n      this.DISCOUNT_PRICE_FORMATED = data.TOTAL.DISCOUNT_PRICE_FORMATED;\r\n\r\n      this.SUM_BASE_FORMATED = data.TOTAL.PRICE_WITHOUT_DISCOUNT;\r\n      this.SUM_FORMATED = data.TOTAL.ORDER_PRICE_FORMATED;\r\n    },\r\n    endLoader() {\r\n      console.log('endLoader');\r\n    },\r\n    getData() {\r\n      const order = {};\r\n      new FormData(this.$refs.form).forEach(\r\n        (value, key) => (order[key] = value)\r\n      );\r\n\r\n      return {\r\n        order,\r\n        sessid: this.sessid,\r\n        via_ajax: 'Y',\r\n        SITE_ID: this.OPTIONS.siteID,\r\n        signedParamsString: this.OPTIONS.signedParamsString,\r\n        'soa-action': 'refreshOrderAjax',\r\n      };\r\n    },\r\n    ajax() {\r\n      const self = this;\r\n\r\n      BX.ajax({\r\n        method: 'POST',\r\n        dataType: 'json',\r\n        url: this.OPTIONS.ajaxUrl,\r\n        data: this.getData(),\r\n        onsuccess: (result) => {\r\n          this.setOptions({ options: result });\r\n        },\r\n        onfailure: (error) => {},\r\n      });\r\n    },\r\n  },\r\n};\r\n","import { BitrixVue } from 'ui.vue3';\r\nimport { Application } from './components/application';\r\nimport { createPinia, setActivePinia } from 'ui.vue3.pinia';\r\nimport { orderStore } from './stores/order';\r\n\r\nexport class OrderMake {\r\n  #store;\r\n  #rootNode;\r\n  #application;\r\n\r\n  constructor(rootNode, options): void {\r\n    this.#store = createPinia();\r\n    this.#rootNode = document.querySelector(rootNode);\r\n    this.options = options;\r\n  }\r\n\r\n  run(): void {\r\n    const self = this;\r\n\r\n    this.#application = BitrixVue.createApp({\r\n      name: 'Order Application',\r\n      components: {\r\n        Application,\r\n      },\r\n      template: '<Application/>',\r\n      mounted() {\r\n        if (self.options && typeof self.options === 'object') {\r\n          Object.keys(self.options).forEach((key) => {\r\n            orderStore()[key] = self.options[key] || '';\r\n          });\r\n        }\r\n\r\n        orderStore().createControls();\r\n      },\r\n    });\r\n\r\n    this.#application.use(this.#store);\r\n    this.#application.mount(this.#rootNode);\r\n  }\r\n\r\n  initStorageBeforeStartApplication(): void {\r\n    setActivePinia(this.#store);\r\n  }\r\n\r\n  getOrderStore(): Object {\r\n    return orderStore;\r\n  }\r\n}\r\n"],"names":["orderStore","defineStore","state","OPTIONS","controls","actions","changeControlValue","control","value","checked","property","changeTextControlValue","changeMultiselectValue","changeCheckboxValue","type","substring","toUpperCase","toLowerCase","changeFileValue","changeDateValue","changeColorValue","changeSelectRadioValue","console","log","setOptions","options","createControls","personType","id","name","label","result","Object","values","PERSON_TYPE","map","p","NAME","code","ID","find","CHECKED","delivery","DELIVERY","d","paysystem","PAY_SYSTEM","orderProps","ORDER_PROP","properties","CODE","VALUE","required","disabled","hidden","window","BX","bitrix_sessid","Application","data","locations","undefined","order","sessid","components","LocationComponent","ControlComponent","template","computed","mapState","LOCATION","lastValue","methods","mapActions","input","attrs","changeDelivery","ajax","changePaysystem","makeData","PAY_SYSTEM_LIST","pay","SORT","DESCRIPTION","SRC","PSA_LOGOTIP_SRC","DELIVERY_LIST","del","LOGOTIP_SRC","PRICE_FORMATED","FIELD_NAME","BASKET","GRID","ROWS","product","PROPERTIES","PROPS","QUANTITY","MEASURE","MEASURE_TEXT","DETAIL_PICTURE_SRC_ORIGINAL","BASE_PRICE","BASE_PRICE_FORMATED","PRICE","DETAIL_PAGE_URL","DISCOUNT_PRICE","PREVIEW_TEXT","SUM_BASE_FORMATED","SUM_FORMATED","SUM","DELIVERY_ERRORS","ERROR","PAY_SYSTEM_ERRORS","PRODUCTS_BASE_PRICE_FORMATED","TOTAL","PRICE_WITHOUT_DISCOUNT","PRODUCTS_PRICE_FORMATED","ORDER_PRICE_FORMATED","PRODUCTS_DISCOUNT_FORMATED","DISCOUNT_PRICE_FORMATED","DELIVERY_BASE_PRICE_FORMATED","DELIVERY_PRICE_FORMATED","endLoader","getData","FormData","$refs","form","forEach","key","via_ajax","SITE_ID","siteID","signedParamsString","method","dataType","url","ajaxUrl","onsuccess","onfailure","error","OrderMake","rootNode","createPinia","document","querySelector","self","BitrixVue","createApp","mounted","keys","use","mount","setActivePinia"],"mappings":"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"}